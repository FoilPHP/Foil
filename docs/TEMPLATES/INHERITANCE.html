<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="author" content="Giuseppe Mazzapica">
    <title>Templates / Template Inheritance. Foil: PHP Template Engine</title>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300|Source+Code+Pro:400' rel='stylesheet' type='text/css'>
    <link href="http://giuseppe-mazzapica.github.io/Foil/css/theme.min.css" rel="stylesheet">
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

    <div id="wrapper">

      <!-- Sidebar -->
      <div id="sidebar-wrapper">
          <ul class="sidebar-nav">
                                                  <li>
                      <a class="section" href="#sidebar-wrapper"><i class="fa fa-caret-right"></i> Getting Started</a>
                      <ul>
                                                        <li class="">
                                  <a href="http://giuseppe-mazzapica.github.io/Foil/docs/GETTING-STARTED/INSTALLATION.html">
                                      Installation
                                  </a>
                              </li>
                                                        <li class="">
                                  <a href="http://giuseppe-mazzapica.github.io/Foil/docs/GETTING-STARTED/ENGINE.html">
                                      Engine
                                  </a>
                              </li>
                                                        <li class="">
                                  <a href="http://giuseppe-mazzapica.github.io/Foil/docs/GETTING-STARTED/FOLDERS.html">
                                      Folders
                                  </a>
                              </li>
                                                        <li class="">
                                  <a href="http://giuseppe-mazzapica.github.io/Foil/docs/GETTING-STARTED/FILE-EXTENSIONS.html">
                                      File Extensions
                                  </a>
                              </li>
                                                </ul>
                    </li>
                                    <li>
                      <a class="section" href="#sidebar-wrapper"><i class="fa fa-caret-right"></i> Templates</a>
                      <ul>
                                                        <li class="">
                                  <a href="http://giuseppe-mazzapica.github.io/Foil/docs/TEMPLATES/OVERVIEW.html">
                                      Installation
                                  </a>
                              </li>
                                                        <li class="active">
                                  <a href="http://giuseppe-mazzapica.github.io/Foil/docs/TEMPLATES/INHERITANCE.html">
                                      Template Inheritance
                                  </a>
                              </li>
                                                        <li class="">
                                  <a href="http://giuseppe-mazzapica.github.io/Foil/docs/TEMPLATES/PARTIALS.html">
                                      Partials
                                  </a>
                              </li>
                                                </ul>
                    </li>
                                    <li>
                      <a class="section" href="#sidebar-wrapper"><i class="fa fa-caret-right"></i> Data</a>
                      <ul>
                                                        <li class="">
                                  <a href="http://giuseppe-mazzapica.github.io/Foil/docs/DATA/PASS-DATA.html">
                                      Pass Data To Templates
                                  </a>
                              </li>
                                                        <li class="">
                                  <a href="http://giuseppe-mazzapica.github.io/Foil/docs/DATA/CONTEXT-API.html">
                                      Context API
                                  </a>
                              </li>
                                                        <li class="">
                                  <a href="http://giuseppe-mazzapica.github.io/Foil/docs/DATA/RETRIEVE-DATA.html">
                                      Retrieve Data Inside Templates
                                  </a>
                              </li>
                                                        <li class="">
                                  <a href="http://giuseppe-mazzapica.github.io/Foil/docs/DATA/HELPERS.html">
                                      Data Helpers
                                  </a>
                              </li>
                                                        <li class="">
                                  <a href="http://giuseppe-mazzapica.github.io/Foil/docs/DATA/FILTERS.html">
                                      Data Filters
                                  </a>
                              </li>
                                                        <li class="">
                                  <a href="http://giuseppe-mazzapica.github.io/Foil/docs/DATA/ARRAIZATION.html">
                                      Arraization
                                  </a>
                              </li>
                                                </ul>
                    </li>
                                    <li>
                      <a class="section" href="#sidebar-wrapper"><i class="fa fa-caret-right"></i> Functions</a>
                      <ul>
                                                        <li class="">
                                  <a href="http://giuseppe-mazzapica.github.io/Foil/docs/FUNCTIONS/LOOP-HELPERS.html">
                                      Loop Helpers
                                  </a>
                              </li>
                                                        <li class="">
                                  <a href="http://giuseppe-mazzapica.github.io/Foil/docs/FUNCTIONS/ARRAY-HELPERS.html">
                                      Array Helpers
                                  </a>
                              </li>
                                                        <li class="">
                                  <a href="http://giuseppe-mazzapica.github.io/Foil/docs/FUNCTIONS/LINK-HELPERS.html">
                                      Link Helpers
                                  </a>
                              </li>
                                                        <li class="">
                                  <a href="http://giuseppe-mazzapica.github.io/Foil/docs/FUNCTIONS/URI-HELPERS.html">
                                      Uri Helpers
                                  </a>
                              </li>
                                                </ul>
                    </li>
                                    <li>
                      <a class="section" href="#sidebar-wrapper"><i class="fa fa-caret-right"></i> Extending Foil</a>
                      <ul>
                                                        <li class="">
                                  <a href="http://giuseppe-mazzapica.github.io/Foil/docs/EXTENDING/FUNCTIONS-AND-FILTERS.html">
                                      Custom Functions and Filters
                                  </a>
                              </li>
                                                        <li class="">
                                  <a href="http://giuseppe-mazzapica.github.io/Foil/docs/EXTENDING/CUSTOM-EXTENSIONS.html">
                                      Custom Foil Extensions
                                  </a>
                              </li>
                                                </ul>
                    </li>
                                    <li>
                      <a class="section" href="#sidebar-wrapper"><i class="fa fa-caret-right"></i> Integrate Foil</a>
                      <ul>
                                                        <li class="">
                                  <a href="http://giuseppe-mazzapica.github.io/Foil/docs/INTEGRATE/OVERVIEW.html">
                                      Overview
                                  </a>
                              </li>
                                                        <li class="">
                                  <a href="http://giuseppe-mazzapica.github.io/Foil/docs/INTEGRATE/API.html">
                                      API Functions
                                  </a>
                              </li>
                                                </ul>
                    </li>
                                        </ul>
      </div>
      <!-- /#sidebar-wrapper -->

        <!-- Page Content -->
        <div id="page-content-wrapper">
            <div class="container-fluid">
                <div class="row">
                    <div id="content" class="col-lg-11">
                                                <ol class="breadcrumb">
                          <li><a href="http://giuseppe-mazzapica.github.io/Foil">Foil</a></li>
                          <li class="active">Templates</li>
                        </ol>
                                                <!--
currentMenu: "inheritance"
currentSection: "Templates"
title: "Template Inheritance"
-->
<h1>Template Inheritance</h1>
<h2>What's that?</h2>
<p>Template inheritance is a technique to write DRY templates. It makes use of <strong>layouts</strong> to define the <em>skeleton</em> of a web page and then various specific <strong>child templates</strong> that <em>extend</em> layouts by defining only the parts that need to be changed.</p>
<p>Moreover, any child template can be used as layout for other templates: in this way is possible to write rich and complex web pages without having to repeat a single template line.</p>
<h2>How It works?</h2>
<p>Essentially, a layout contains the structure of a web page, and individuate specific <em>areas</em> in the page (e.g. "header" or "footer").</p>
<p>Then a layout can be extended by templates that contain only the code for the areas to be modified.</p>
<p>After that, the engine render the HTML for a web page by <em>merging</em> common areas taken from layout and specific template areas defined in the child template.</p>
<p>Layout areas in Foil are called <strong>sections</strong> (some other template engines like <a href="http://twig.sensiolabs.org/doc/templates.html#template-inheritance">Twig</a> call them <em>blocks</em>).</p>
<p>An example will make the concept easier to understand.</p>
<p>Let's define a base layout, <code>main.php</code>, which defines a simple HTML skeleton document that you might use for a simple web page.</p>
<pre><code class="language-php">&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;?php $this-&gt;section('head') ?&gt;
          &lt;link rel="stylesheet" href="style.css" /&gt;
          &lt;title&gt;&lt;?php $this-&gt;section('title') ?&gt;My Webpage&lt;?php $this-&gt;stop() ?&gt;&lt;/title&gt;
        &lt;?php $this-&gt;stop() ?&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;div id="content"&gt;
          &lt;?php $this-&gt;section('content') ?&gt;
          &lt;?php $this-&gt;stop() ?&gt;
        &lt;/div&gt;
        &lt;div id="footer"&gt;
          &lt;?php $this-&gt;section('footer') ?&gt;
            &amp;copy; Copyright 2014 by &lt;a href="http://example.com/"&gt;you&lt;/a&gt;.
          &lt;?php $this-&gt;stop() ?&gt;
        &lt;/div&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
<p><strong><code>section()</code></strong> method is used to start a section definition. You need to pass an unique name for the section.</p>
<p><strong><code>stop()</code></strong> method is used to end a section definition. There is no need to pass section name, because <code>stop()</code> ends the last opened section.</p>
<p>Note that is possible to create nested sections, e. g. in code above the section "title" is <em>inside</em> the section "head".</p>
<p>Now we can write a child template, that uses layout above and define only parts that need to be changed.</p>
<pre><code class="language-php">&lt;?php $this-&gt;layout('main') ?&gt;

&lt;?php $this-&gt;section('head') ?&gt;
&lt;style type="text/css"&gt;
  #welcome { color: #ff0000; }
&lt;/style&gt;
&lt;?php $this-&gt;append() ?&gt;

&lt;?php $this-&gt;section('content') ?&gt;
&lt;h1&gt;Index&lt;/h1&gt;
&lt;p id="welcome"&gt;Welcome to my awesome homepage.&lt;/p&gt;
&lt;?php $this-&gt;append() ?&gt;</code></pre>
<p><strong><code>layout()</code></strong> is the method used to assign a layout to a child template. It must be in the first line of a template file.</p>
<p>In a child template the content between <code>section()</code> and <code>append()</code> is <strong>appended</strong> to the same section defined in the layout.</p>
<p>E.g. if the child template above is rendered, <code>&lt;head&gt;</code> tag will contain:</p>
<pre><code class="language-html">&lt;head&gt;
  &lt;link rel="stylesheet" href="style.css" /&gt;
  &lt;title&gt;My Webpage&lt;/title&gt;
  &lt;style type="text/css"&gt;
    .important { color: #336699; }
  &lt;/style&gt;
&lt;/head&gt;</code></pre>
<p>Inside a child template, is also possible to completely <strong>replace</strong> the content of a layout section by using <strong><code>replace()</code></strong> method to close a section.</p>
<p>E.g. using same <code>main.php</code> layout and a template with following code:</p>
<pre><code class="language-php">&lt;?php $this-&gt;layout('main') ?&gt;

&lt;?php $this-&gt;section('head') ?&gt;
&lt;link rel="stylesheet" href="style-alt.css" /&gt;
&lt;title&gt;A Title&lt;/title&gt;
&lt;?php $this-&gt;replace() ?&gt;</code></pre>
<p>the rendered <code>&lt;head&gt;</code> tag would be:</p>
<pre><code class="language-html">&lt;head&gt;
  &lt;link rel="stylesheet" href="style-alt.css" /&gt;
  &lt;title&gt;A Title&lt;/title&gt;
&lt;/head&gt;</code></pre>
<p>In examples above, to close a section in child templates I always used <code>append()</code> or <code>replace()</code>, but is possible to use <code>stop()</code> as well,
just like in layouts (in fact any child template may be used as layout to another template).</p>
<p>When used inside a child template <code>stop()</code>, by default, acts just like <code>append()</code>, but is possible to make it works like <code>replace()</code>
by setting <code>'section_def_mode'</code> Foil engine option to <code>Foil\Contracts\SectionInterface::MODE_REPLACE</code>. Something like:</p>
<pre><code class="language-php">$engine = Foil\engine([
    'folders'          =&gt; ['path/to/templates'],
    'section_def_mode' =&gt; Foil\Contracts\SectionInterface::MODE_REPLACE
]);</code></pre>
<h2>Functions Summary</h2>
<ul>
<li>
<p><strong><code>layout()</code></strong> is used to assign a layout to a template. By default a layout has access to all the
template variables, but is possible limit or completely disable access to templates variables.
Is also possible pass layout-specific variables. See <em>"Data / Pass Data to Templates"</em> to know more.</p>
</li>
<li>
<p><strong><code>section()</code></strong> is used to start a section definition.</p>
</li>
<li>
<p><strong><code>append()</code></strong>, <strong><code>replace()</code></strong> and <strong><code>stop()</code></strong> are all used to end a section definition, but</p>
<ul>
<li><code>append()</code> appends the section content to same section content in layout</li>
<li><code>replace()</code> replaces the content of same section in layout</li>
<li><code>stop()</code> may acts as <code>append()</code> or <code>replace()</code> depending on section default mode, that by default is set to append.</li>
</ul>
<p>Please note that in <em>base</em> layouts (templates that don't extend any layout) or in partials, there is <strong>no difference</strong> among the 3 functions, because in those files there is nothing to replace or to append to.
For this reasons I suggest to always use <code>stop()</code> in those cases to avoid confusion.</p>
</li>
</ul>
<h2>Stacked Layouts</h2>
<p>A basic principle of template inheritance is that a template that uses a layout can be used as layout for another template.
Foil supports this workflow with no limit on inheritance levels.</p>
<p>Let's write a base layout, assuming it is saved in a file named <code>'index.php'</code></p>
<pre><code class="language-php">&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;?php $this-&gt;section('head') ?&gt;
          &lt;link rel="stylesheet" href="style.css" /&gt;
          &lt;title&gt;&lt;?= $this-&gt;title ?&gt;&lt;/title&gt;
        &lt;?php $this-&gt;stop() // head ?&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;div id="main"&gt;
          &lt;?php $this-&gt;section('main') ?&gt;
            Welcome to My Awesome Home Page
          &lt;?php $this-&gt;stop() // main ?&gt;
        &lt;/div&gt;
        &lt;div id="footer"&gt;
          &lt;?php $this-&gt;section('footer') ?&gt;
            &amp;copy; Copyright 2014 by &lt;a href="http://example.com/"&gt;you&lt;/a&gt;.
          &lt;?php $this-&gt;stop() // footer ?&gt;
        &lt;/div&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>Now a template that uses previous layout, assuming it is saved in a file named <code>'blog.php'</code></p>
<pre><code class="language-php">&lt;?php $this-&gt;layout('index') ?&gt;

&lt;?php $this-&gt;section('main') ?&gt;

  &lt;?php $this-&gt;section('content') ?&gt;
  &lt;section&gt;
    Welcome to My Blog
  &lt;/section&gt;
  &lt;?php $this-&gt;stop() // content ?&gt;

  &lt;aside&gt;
    &lt;?= $this-&gt;insert('partials/sidebar') // insert a partial ?&gt;
  &lt;/aside&gt;

&lt;?php $this-&gt;replace() // main ?&gt;</code></pre>
<p>And finally an article template that uses previous <code>'blog.php'</code> as layout</p>
<pre><code class="language-php">&lt;?php $this-&gt;layout('blog') ?&gt;

&lt;?php $this-&gt;section('content') ?&gt;
&lt;article&gt;
  &lt;?= $this-&gt;v('article.content') ?&gt;
&lt;/article&gt;
&lt;?php $this-&gt;replace() ?&gt;</code></pre>
<p>This pretty trivial example gives you an idea of the power template inheritance gives to you.</p>
<p>In the example above there are some examples of template data access, e.g. <code>$this-&gt;title</code> in the index layout.</p>
<p>In facts, template properties give access to data passed to template using engine <code>render()</code> method.</p>
<p>Moreover, in the last template, there is the line</p>
<pre><code class="language-php">$this-&gt;v('article.content')</code></pre>
<p>It's a data helper: a function that facilitates the access to nested template data.</p>
<p>There is <strong>a lot</strong> more to say about template data in Foil, see <em>"Data"</em> docs section to learn more.</p>
<h2>Section Supply</h2>
<p><code>section()</code>, <code>stop()</code>, <code>append()</code> and <code>replace()</code> methods are a very powerful way to obtain template inheritance by defining a default content for a section that can be easily overridden in child templates.</p>
<p>But sometimes, in a template, one wants to output a section only if it is defined in any of the child templates, otherwise just output nothing.</p>
<p>That can be surely done by defining a empty section:</p>
<pre><code class="language-php">&lt;?php $this-&gt;section('foo') ?&gt;
&lt;?php $this-&gt;stop() ?&gt;</code></pre>
<p>However this looks pretty <em>inelegant</em> and probably worsens readability.</p>
<p>A better way to do the trick is to use the <code>supply()</code> method: it accepts a section name and returns the section content only if it is defined.</p>
<pre><code class="language-php">&lt;?php $this-&gt;supply('foo') // Outputs the content of 'foo' section if it is defined ?&gt;</code></pre>
<p><code>supply()</code> accepts as second argument a <strong>default content</strong> to be used if the section is not defined.</p>
<pre><code class="language-php">&lt;?php $this-&gt;supply('posts', 'Sorry, no post found.') ?&gt;</code></pre>
<p>This is a comfortable and readable way to obtain template inheritance when the default content can be contained in one line,
for multi-line section content (way more common in real world applications) the <code>section()</code> / <code>stop()</code> method is the suggested way to go.</p>
<h2>Template Buffer</h2>
<p>In all the examples in this page, when there is a child template that uses a layout, all the template code is inside sections.</p>
<p>But if a template contains some content outside of any section, that content is <strong>not</strong> returned in the rendered HTML, but is stored in <strong>template buffer</strong>.</p>
<p>In any layout, <code>buffer()</code> method gives access to all the content defined outside of any section in the <em>direct</em> child template. It works seamlessly with stacked layouts.</p>
<p>Let's assume we have following layout code saved in a file named <code>base.php</code>  </p>
<pre><code class="language-php">&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
      &lt;title&gt;My Awesome Page&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
      &lt;?= $this-&gt;buffer() ?&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>and the following template code saved in a file named <code>home.php</code>  </p>
<pre><code class="language-php">&lt;?php $this-&gt;layout('base') ?&gt;

&lt;p&gt;Welcome to My Site&lt;/p&gt;

&lt;?= $this-&gt;buffer() ?&gt;</code></pre>
<p>and finally the following template code that uses the previous as layout</p>
<pre><code class="language-php">&lt;?php $this-&gt;layout('home') ?&gt;

&lt;p&gt;I hope you like it.&lt;/p&gt;</code></pre>
<p>When the template right above is rendered, the HTML obtained will be</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
      &lt;title&gt;My Awesome Page&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
      &lt;p&gt;Welcome to My Site&lt;/p&gt;
      &lt;p&gt;I hope you like it.&lt;/p&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
                    </div>
                </div>
            </div>
        </div>
        <!-- /#page-content-wrapper -->

                    <a href="https://github.com/Giuseppe-Mazzapica/Foil">
                <img style="position:fixed; top:0; right:0; border:0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png">
            </a>
        
        <a href="#" id="menu-toggle" title="Toggle Menu"><i class="fa fa-bars"></i></a>

    </div>
    <!-- /#wrapper -->

    <a href="#wrapper" id="back-top" title="Back to top"><i class="fa fa-long-arrow-up"></i></a>

    <footer class="footer">
      Made by hands by
      <a href="http://gm.zoomlab.it/" title="Giuseppe Mazzapica Home Page" target="_blank">Giuseppe Mazzapica</a>, with
      <a href="http://couscous.io/" title="Couscous" target="_blank">Couscous</a>,
      <a href="http://getbootstrap.com/" title="Bootstrap" target="_blank">Bootstrap</a> &amp;
      <a href="https://highlightjs.org/" title="highlight.js" target="_blank">highlight.js</a>

      <span class="socials">
        <a href="https://github.com/Giuseppe-Mazzapica" title="GitHub" target="_blank"><i class="fa fa-github-alt"></i></a>
        <a href="https://twitter.com/gmazzap" title="Twitter" target="_blank"><i class="fa fa-twitter"></i></a>
        <a href="http://wordpress.stackexchange.com/users/35541/" title="Stack Exchange" target="_blank"><i class="fa fa-stack-exchange"></i></a>
      </span>

    </footer>

    <script src="http://yandex.st/highlightjs/7.5/highlight.min.js"></script>
    <script src="http://giuseppe-mazzapica.github.io/Foil/js/theme.min.js"></script>


</body>

</html>
