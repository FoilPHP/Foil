<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="author" content="Giuseppe Mazzapica">
    <title>Data / Data Filters. Foil: PHP Template Engine</title>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300|Source+Code+Pro:400' rel='stylesheet' type='text/css'>
    <link href="http://www.foilphp.it/css/theme.min.css" rel="stylesheet">
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

    <div id="wrapper">

      <!-- Sidebar -->
      <div id="sidebar-wrapper">
          <ul class="sidebar-nav">
                                                  <li>
                      <a class="section" href="#sidebar-wrapper"><i class="fa fa-caret-right"></i> Getting Started</a>
                      <ul>
                                                        <li class="">
                                  <a href="http://www.foilphp.it/docs/GETTING-STARTED/INSTALLATION.html">
                                      Installation
                                  </a>
                              </li>
                                                        <li class="">
                                  <a href="http://www.foilphp.it/docs/GETTING-STARTED/ENGINE.html">
                                      Engine
                                  </a>
                              </li>
                                                        <li class="">
                                  <a href="http://www.foilphp.it/docs/GETTING-STARTED/ALIAS.html">
                                      Alias
                                  </a>
                              </li>
                                                        <li class="">
                                  <a href="http://www.foilphp.it/docs/GETTING-STARTED/FOLDERS.html">
                                      Folders
                                  </a>
                              </li>
                                                        <li class="">
                                  <a href="http://www.foilphp.it/docs/GETTING-STARTED/FILE-EXTENSIONS.html">
                                      File Extensions
                                  </a>
                              </li>
                                                </ul>
                    </li>
                                    <li>
                      <a class="section" href="#sidebar-wrapper"><i class="fa fa-caret-right"></i> Templates</a>
                      <ul>
                                                        <li class="">
                                  <a href="http://www.foilphp.it/docs/TEMPLATES/OVERVIEW.html">
                                      Overview
                                  </a>
                              </li>
                                                        <li class="">
                                  <a href="http://www.foilphp.it/docs/TEMPLATES/INHERITANCE.html">
                                      Template Inheritance
                                  </a>
                              </li>
                                                        <li class="">
                                  <a href="http://www.foilphp.it/docs/TEMPLATES/SECTIONS-RENDERING.html">
                                      Sections Rendering
                                  </a>
                              </li>
                                                        <li class="">
                                  <a href="http://www.foilphp.it/docs/TEMPLATES/PARTIALS.html">
                                      Partials
                                  </a>
                              </li>
                                                </ul>
                    </li>
                                    <li>
                      <a class="section" href="#sidebar-wrapper"><i class="fa fa-caret-right"></i> Data</a>
                      <ul>
                                                        <li class="">
                                  <a href="http://www.foilphp.it/docs/DATA/PASS-DATA.html">
                                      Pass Data To Templates
                                  </a>
                              </li>
                                                        <li class="">
                                  <a href="http://www.foilphp.it/docs/DATA/CONTEXT-API.html">
                                      Context API
                                  </a>
                              </li>
                                                        <li class="">
                                  <a href="http://www.foilphp.it/docs/DATA/RETRIEVE-DATA.html">
                                      Retrieve Data Inside Templates
                                  </a>
                              </li>
                                                        <li class="">
                                  <a href="http://www.foilphp.it/docs/DATA/HELPERS.html">
                                      Data Helpers
                                  </a>
                              </li>
                                                        <li class="active">
                                  <a href="http://www.foilphp.it/docs/DATA/FILTERS.html">
                                      Data Filters
                                  </a>
                              </li>
                                                        <li class="">
                                  <a href="http://www.foilphp.it/docs/DATA/ARRAIZATION.html">
                                      Arraization
                                  </a>
                              </li>
                                                </ul>
                    </li>
                                    <li>
                      <a class="section" href="#sidebar-wrapper"><i class="fa fa-caret-right"></i> Blocks &amp; Helpers</a>
                      <ul>
                                                        <li class="">
                                  <a href="http://www.foilphp.it/docs/FUNCTIONS/BLOCKS.html">
                                      Blocks
                                  </a>
                              </li>
                                                        <li class="">
                                  <a href="http://www.foilphp.it/docs/FUNCTIONS/LOOP-HELPERS.html">
                                      Loop Helpers
                                  </a>
                              </li>
                                                        <li class="">
                                  <a href="http://www.foilphp.it/docs/FUNCTIONS/ARRAY-HELPERS.html">
                                      Array Helpers
                                  </a>
                              </li>
                                                        <li class="">
                                  <a href="http://www.foilphp.it/docs/FUNCTIONS/LINK-HELPERS.html">
                                      Link Helpers
                                  </a>
                              </li>
                                                        <li class="">
                                  <a href="http://www.foilphp.it/docs/FUNCTIONS/URI-HELPERS.html">
                                      Uri Helpers
                                  </a>
                              </li>
                                                        <li class="">
                                  <a href="http://www.foilphp.it/docs/FUNCTIONS/HTML-HELPERS.html">
                                      HTML and Form Helpers
                                  </a>
                              </li>
                                                </ul>
                    </li>
                                    <li>
                      <a class="section" href="#sidebar-wrapper"><i class="fa fa-caret-right"></i> Extending Foil</a>
                      <ul>
                                                        <li class="">
                                  <a href="http://www.foilphp.it/docs/EXTENDING/CUSTOM-BLOCKS.html">
                                      Custom Blocks
                                  </a>
                              </li>
                                                        <li class="">
                                  <a href="http://www.foilphp.it/docs/EXTENDING/FUNCTIONS-AND-FILTERS.html">
                                      Custom Functions and Filters
                                  </a>
                              </li>
                                                        <li class="">
                                  <a href="http://www.foilphp.it/docs/EXTENDING/CUSTOM-EXTENSIONS.html">
                                      Custom Foil Extensions
                                  </a>
                              </li>
                                                </ul>
                    </li>
                                    <li>
                      <a class="section" href="#sidebar-wrapper"><i class="fa fa-caret-right"></i> Integrate Foil</a>
                      <ul>
                                                        <li class="">
                                  <a href="http://www.foilphp.it/docs/INTEGRATE/OVERVIEW.html">
                                      Overview
                                  </a>
                              </li>
                                                        <li class="">
                                  <a href="http://www.foilphp.it/docs/INTEGRATE/API.html">
                                      API Functions
                                  </a>
                              </li>
                                                </ul>
                    </li>
                                        </ul>
      </div>
      <!-- /#sidebar-wrapper -->

        <!-- Page Content -->
        <div id="page-content-wrapper">
            <div class="container-fluid">
                <div class="row">
                    <div id="content" class="col-lg-11">
                                                <ol class="breadcrumb">
                          <li><a href="http://www.foilphp.it">Foil</a></li>
                          <li class="active">Data</li>
                        </ol>
                                                <!--
currentMenu: "datafilters"
currentSection: "Data"
title: "Data Filters"
-->
<h1>Filters</h1>
<p>Filters are callbacks that modify a given value and return the modified value.</p>
<p>Foils ships with several ready-made filters, but is possible to easily add custom filters.
See <em>"Extending Foil"</em> docs section to know more about custom filters.</p>
<h2>Foil Filters</h2>
<p>Filters that comes with Foil are:</p>
<ul>
<li><code>'e'</code>, html-encodes a string, or any string contained in an array</li>
<li><code>'first'</code>, returns first item of an array or first char of a string</li>
<li><code>'last'</code>, returns last item of an array or last char of a string</li>
<li><code>'chunk'</code>, chunks an array by returning an array of arrays with the given number of items. It is also possible to provide a value to fill missing items. It works very similar to <a href="http://twig.sensiolabs.org/doc/filters/batch.html"><code>batch</code> Twig filter</a>.</li>
</ul>
<h2>Apply Filters</h2>
<p>There are three ways to apply filters in Foil, and all supports filter "waterfall", that is apply more filters at once, where next filter in the list receives result of the previous.</p>
<p>Filters can be applied with:</p>
<ul>
<li><code>filter()</code> template method</li>
<li><code>f()</code> template helper</li>
<li>passing filter as 3rd argument for any of the data helpers. See <em>"Data / Helpers"</em> for more info.</li>
</ul>
<p>Both <code>filter()</code> and <code>f()</code> accept as first argument one or more filters, as array or as pipe-separated list.</p>
<p>Second arguments for both functions is the variable to filter, but <code>filter()</code> accepts the variable <em>value</em> to filter, where <code>f()</code> accepts the variable <em>name</em>.</p>
<p>The two lines the template code below are equivalent.</p>
<pre><code class="language-php">$this-&gt;filter('e|first', $this-&gt;foo);

$this-&gt;f('e|first', 'foo');</code></pre>
<p><code>f()</code> helper supports dot syntax to access variables in nested arrays.</p>
<p>Again, the two lines the template code below are equivalent.</p>
<pre><code class="language-php">$this-&gt;filter('e|first', $this-&gt;raw('a.pretty.deep.var'));

$this-&gt;f('e|first', 'a.pretty.deep.var');</code></pre>
<p>See <em>"Data / Helpers"</em> to know more about Foil dot syntax and <code>raw()</code> helper used in code above.</p>
<h2>Examples</h2>
<p>Below there are some examples of Foil filters usage.</p>
<p>The following Foil engine bootstrap code is used as context for all examples:</p>
<pre><code class="language-php">$data = [
  'some'   =&gt; [
      'pretty' =&gt; [
          'deep' =&gt; [
              'vars' =&gt; [
                  'lorem' =&gt; '&lt;b&gt;Lorem&lt;/b&gt;',
                  'ipsum' =&gt; '&lt;b&gt;Ipsum&lt;/b&gt;',
                  'dolor' =&gt; '&lt;b&gt;Dolor&lt;/b&gt;',
                  'sit'   =&gt; '&lt;b&gt;Sit&lt;/b&gt;',
                  'amet'  =&gt; '&lt;b&gt;Amet&lt;/b&gt;',
              ]
          ]
      ]
  ]
];

$engine = Foil\engine([
  'folders'    =&gt; 'path/to/templates',
  'autoescape' =&gt; false
]);

echo $engine-&gt;render('template', $data);</code></pre>
<h2><code>"first"</code></h2>
<pre><code class="language-php">$this-&gt;filter('first', $this-&gt;v('some.pretty.deep.vars')); // '&lt;b&gt;Lorem&lt;/b&gt;'

$this-&gt;f('first', 'some.pretty.deep.vars'); // '&lt;b&gt;Lorem&lt;/b&gt;'

$this-&gt;filter('first|e', $this-&gt;v('some.pretty.deep.vars')); // '&amp;lt;b&amp;gt;Lorem&amp;lt;/b&amp;gt;'

$this-&gt;f(['first', 'e'], 'some.pretty.deep.vars'); // // '&amp;lt;b&amp;gt;Lorem&amp;lt;/b&amp;gt;'</code></pre>
<h2><code>"last"</code></h2>
<pre><code class="language-php">$this-&gt;filter('last', $this-&gt;v('some.pretty.deep.vars')); // '&lt;b&gt;Amet&lt;/b&gt;'

$this-&gt;f('last', 'some.pretty.deep.vars'); // '&lt;b&gt;Amet&lt;/b&gt;'

$this-&gt;filter('last|e', $this-&gt;v('some.pretty.deep.vars')); // '&amp;lt;b&amp;gt;Amet&amp;lt;/b&amp;gt;'

$this-&gt;f(['last', 'e'], 'some.pretty.deep.vars'); // // '&amp;lt;b&amp;gt;Amet&amp;lt;/b&amp;gt;'</code></pre>
<h2><code>"chunk"</code></h2>
<pre><code class="language-php">echo '&lt;table&gt;';
foreach ($this-&gt;f('chunk', 'some.pretty.deep.vars', [2]) as $row) {
  echo '&lt;tr&gt;';
  foreach($row as $column) {
    printf('&lt;td&gt;%s&lt;/td&gt;', $column);
  }
  echo '&lt;/tr&gt;';
}
echo '&lt;/table&gt;';

/*
will echo:

&lt;table&gt;
    &lt;tr&gt;
        &lt;td&gt;&lt;b&gt;Lorem&lt;/b&gt;&lt;/td&gt;
        &lt;td&gt;&lt;b&gt;Ipsum&lt;/b&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;&lt;b&gt;Dolor&lt;/b&gt;&lt;/td&gt;
        &lt;td&gt;&lt;b&gt;Sit&lt;/b&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;&lt;b&gt;Amet&lt;/b&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;/table&gt;
*/</code></pre>
<p><code>"chunk"</code> also accepts an additional argument to be used as <em>filler</em> for missing items, e.g. if in code above I'd used:</p>
<pre><code class="language-php">foreach ($this-&gt;f('chunk', 'some.pretty.deep.vars', [2, '&lt;b&gt;Fill With Me&lt;/b&gt;']) as $row) {</code></pre>
<p>the output would be:</p>
<pre><code class="language-html">&lt;table&gt;
    &lt;tr&gt;
        &lt;td&gt;&lt;b&gt;Lorem&lt;/b&gt;&lt;/td&gt;
        &lt;td&gt;&lt;b&gt;Ipsum&lt;/b&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;&lt;b&gt;Dolor&lt;/b&gt;&lt;/td&gt;
        &lt;td&gt;&lt;b&gt;Sit&lt;/b&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;&lt;b&gt;Amet&lt;/b&gt;&lt;/td&gt;
        &lt;td&gt;&lt;b&gt;Fill With Me&lt;/b&gt;&lt;/td&gt;
    &lt;/tr&gt;
&lt;/table&gt;</code></pre>
<h2>Filters Additional Arguments</h2>
<p>As demonstrated in the <code>"chunk"</code> example above, to pass arguments to filter callbacks both <code>filter()</code> and <code>f()</code> functions accept a third argument that is the array of additional arguments to pass to filter callback.</p>
<p><code>"chunk"</code> is the only filter that comes with Foil that accepts additional arguments, but any of the custom filters you may write can accept additional arguments too.</p>
<p>When in "waterfall" mode, third argument for <code>f()</code> and <code>filter()</code> must be an array of arrays, that must have as many items as the filter count, in a way that every filter has its own array of arguments.</p>
<p>Please note that in "waterfall" mode if even only one filter needs additional arguments you have to pass additional arguments array for all filters, even for ones doesn't need them, in which case you'll pass an empty array.</p>
<p>Let's assume you created two custom filters: <code>"filter_one"</code> that doesn't accepts additional arguments, and <code>"filter_two"</code> that accepts 2 additional arguments.</p>
<p>You can use them in "waterfall" mode, with code like the following:</p>
<pre><code class="language-php">$this-&gt;f(
 'chunk|escape|filter_one|filter_two',
 'some.pretty.deep.vars',
 [
     [2, 'Filler'], // additional args for "chunk"
     [],            // additional args for "escape"
     [],            // additional args for "filter_one"
     ['foo', 'bar'] // additional args for "filter_two"
 ]
);</code></pre>
<h2>Default Value For <code>f()</code></h2>
<p><code>f()</code> accepts as the value to filter a variable name, that may or may not be defined.
By default, <code>f()</code> will consider undefined variables equal to an empty string and <strong>will pass that empty string to filters</strong>.
It means that <code>f()</code> may return something even if the variable name passed to it is not defined.</p>
<p>To avoid that you may use the <code>filter()</code> function instead, after checking the value to filter, e.g.</p>
<pre><code class="language-php">$value = $this-&gt;v('some.pretty.deep.vars');
echo $value ? $this-&gt;filter('custom_filter', $value) : '';</code></pre>
<p><code>f()</code> also accepts a 4th argument, that is the value to be used as default if the required variable is not defined</p>
<pre><code class="language-php">$this-&gt;f(
  'first|escape|custom_filter',
  'some.pretty.deep.vars',
  null,
  'I am a default'
);</code></pre>
<p>Please note that if you don't need to pass additional filter arguments, but you need a default value, like in the example above, 3rd argument for <code>f()</code> must be <code>null</code>, any other value will cause an error.</p>
                    </div>
                </div>
            </div>
        </div>
        <!-- /#page-content-wrapper -->

                    <a href="https://github.com/Giuseppe-Mazzapica/Foil">
                <img style="position:fixed; top:0; right:0; border:0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png">
            </a>
                <a href="#" id="menu-toggle" title="Toggle Menu"><i class="fa fa-bars"></i></a>


    </div>
    <!-- /#wrapper -->

    <footer class="footer hidden-xs hidden-sm">
      Made by hands by
      <a href="http://gm.zoomlab.it/" title="Giuseppe Mazzapica Home Page" target="_blank">Giuseppe Mazzapica</a>, with
      <a href="http://couscous.io/" title="Couscous" target="_blank">Couscous</a>,
      <a href="http://getbootstrap.com/" title="Bootstrap" target="_blank">Bootstrap</a> &amp;
      <a href="https://highlightjs.org/" title="highlight.js" target="_blank">highlight.js</a>

      <span class="socials">
        <a href="https://github.com/Giuseppe-Mazzapica" title="GitHub" target="_blank"><i class="fa fa-github-alt"></i></a>
        <a href="https://twitter.com/gmazzap" title="Twitter" target="_blank"><i class="fa fa-twitter"></i></a>
        <a href="http://wordpress.stackexchange.com/users/35541/" title="Stack Exchange" target="_blank"><i class="fa fa-stack-exchange"></i></a>
      </span>

    </footer>

    <a href="#wrapper" class="hidden-xs hidden-sm" id="back-top" title="Back to top"><i class="fa fa-long-arrow-up"></i></a>
    <script src="http://yandex.st/highlightjs/7.5/highlight.min.js"></script>
    <script src="http://www.foilphp.it/js/theme.min.js"></script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-46467639-2', 'auto');
      ga('send', 'pageview');
    </script>

</body>

</html>
